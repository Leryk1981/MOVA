# üß† ML Integration –¥–ª—è MOVA SDK

## –û–±–∑–æ—Ä

ML Integration –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –≤ MOVA SDK –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∏–π, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π (Intent Recognition)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ BERT/RoBERTa –º–æ–¥–µ–ª–µ–π
- Confidence scoring –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
- Fallback –∫ –ø—Ä–∞–≤–∏–ª–∞–º –ø—Ä–∏ –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

### üè∑Ô∏è –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π (Entity Extraction)
- Named Entity Recognition (NER)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- Entity linking –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ email, —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤, –∏–º–µ–Ω, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π

### üîÑ –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Context Analysis)
- –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –û–±—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

### üòä –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π (Sentiment Analysis)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–∫—Ä–∞—Å–∫–∏ —Ç–µ–∫—Å—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –∏ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
- Confidence scoring –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ spaCy –º–æ–¥–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
python -m spacy download ru_core_news_sm
```

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
import asyncio
from mova.ml.integration import MLIntegration

async def main():
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ML –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    ml_integration = MLIntegration()
    
    # –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
    text = "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è john@example.com"
    prediction = await ml_integration.analyze_text(text, "session_123")
    
    if prediction:
        print(f"–ù–∞–º–µ—Ä–µ–Ω–∏–µ: {prediction.intent.intent.value}")
        print(f"–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {prediction.intent.confidence:.2f}")
        print(f"–°—É—â–Ω–æ—Å—Ç–∏: {len(prediction.entities.entities)}")
        print(f"–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: {prediction.sentiment.sentiment.value}")
        print(f"–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: {prediction.processing_time:.3f}s")

asyncio.run(main())
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ML –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```yaml
# ml_config.yaml
ml_integration:
  enabled: true
  models:
    intent_classifier:
      model_type: "bert"
      model_path: "models/intent_classifier/"
      confidence_threshold: 0.8
      fallback_to_rules: true
    
    entity_extractor:
      model_type: "spacy"
      model_path: "models/entity_extractor/"
      custom_entities: true
    
    context_analyzer:
      model_type: "transformer"
      model_path: "models/context_analyzer/"
      memory_size: 1000
  
  training:
    auto_retrain: true
    retrain_interval: "7d"
    min_samples: 1000
  
  performance:
    batch_size: 32
    max_concurrent_requests: 10
    cache_predictions: true
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# ML –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
MOVA_ML_ENABLED=true
MOVA_ML_MODELS_DIR=models
MOVA_ML_CONFIDENCE_THRESHOLD=0.8
MOVA_ML_BATCH_SIZE=32
MOVA_ML_MAX_CONCURRENT_REQUESTS=10
MOVA_ML_CACHE_PREDICTIONS=true
MOVA_ML_AUTO_RETRAIN=false
MOVA_ML_RETRAIN_INTERVAL=7d
MOVA_ML_MIN_SAMPLES=1000
```

## API Reference

### MLIntegration

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å ML —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.

#### –ú–µ—Ç–æ–¥—ã

##### `analyze_text(text: str, session_id: Optional[str] = None, user_id: Optional[str] = None) -> Optional[MLPrediction]`

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –Ω–∞–º–µ—Ä–µ–Ω–∏–π, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –∞–Ω–∞–ª–∏–∑–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π.

```python
prediction = await ml_integration.analyze_text(
    "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    session_id="user_123",
    user_id="user_456"
)
```

##### `recognize_intent(text: str, model_id: str = "intent_classifier") -> Optional[IntentResult]`

–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç–µ.

```python
intent_result = await ml_integration.recognize_intent("–í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É")
```

##### `extract_entities(text: str, model_id: str = "entity_extractor") -> Optional[EntityResult]`

–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏–∑ —Ç–µ–∫—Å—Ç–∞.

```python
entity_result = await ml_integration.extract_entities("–ú–æ–π email john@example.com")
```

##### `analyze_context(session_id: str, text: str, user_id: Optional[str] = None) -> Optional[ContextResult]`

–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å–µ—Å—Å–∏–∏.

```python
context_result = await ml_integration.analyze_context(
    "session_123", 
    "–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω",
    "user_456"
)
```

##### `predict_sentiment(text: str, model_id: str = "sentiment_analyzer") -> Optional[SentimentResult]`

–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.

```python
sentiment_result = await ml_integration.predict_sentiment("–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!")
```

##### `train_model(model_type: str, training_data: List[TrainingExample], config: TrainingConfig) -> Dict[str, Any]`

–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏.

```python
training_data = [
    TrainingExample(text="–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è", intent=IntentType.USER_REGISTRATION),
    TrainingExample(text="–í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É", intent=IntentType.USER_LOGIN)
]

config = TrainingConfig(
    model_type=MLModelType.BERT,
    training_data=training_data,
    epochs=10,
    learning_rate=2e-5,
    batch_size=16,
    save_path="models/intent_classifier/"
)

result = await ml_integration.train_model("intent_classifier", training_data, config)
```

##### `batch_analyze(texts: List[str], session_ids: Optional[List[str]] = None, user_ids: Optional[List[str]] = None) -> List[Optional[MLPrediction]]`

–ü–∞–∫–µ—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤.

```python
texts = ["–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è", "–í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É", "–ü—Ä–æ–≤–µ—Ä—å –¥–∞–Ω–Ω—ã–µ"]
results = await ml_integration.batch_analyze(texts)
```

##### `get_metrics_summary() -> Dict[str, Any]`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏ –º–µ—Ç—Ä–∏–∫.

```python
metrics = await ml_integration.get_metrics_summary()
```

##### `get_system_status() -> Dict[str, Any]`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã.

```python
status = ml_integration.get_system_status()
```

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### IntentType

–¢–∏–ø—ã –Ω–∞–º–µ—Ä–µ–Ω–∏–π:

- `USER_REGISTRATION` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `USER_LOGIN` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `DATA_VALIDATION` - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `CONFIG_UPDATE` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `CACHE_OPERATION` - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫—ç—à–µ–º
- `REDIS_OPERATION` - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å Redis
- `LLM_REQUEST` - –ó–∞–ø—Ä–æ—Å –∫ LLM
- `ERROR_REPORT` - –û—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–µ
- `HELP_REQUEST` - –ó–∞–ø—Ä–æ—Å –ø–æ–º–æ—â–∏
- `CUSTOM` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ

### EntityType

–¢–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π:

- `PERSON` - –ò–º—è —á–µ–ª–æ–≤–µ–∫–∞
- `EMAIL` - Email –∞–¥—Ä–µ—Å
- `PHONE` - –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `ORGANIZATION` - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- `LOCATION` - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
- `DATE` - –î–∞—Ç–∞
- `TIME` - –í—Ä–µ–º—è
- `MONEY` - –î–µ–Ω–µ–∂–Ω–∞—è —Å—É–º–º–∞
- `PERCENT` - –ü—Ä–æ—Ü–µ–Ω—Ç
- `CUSTOM` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å—É—â–Ω–æ—Å—Ç—å

### SentimentType

–¢–∏–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π:

- `POSITIVE` - –ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ
- `NEGATIVE` - –ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ
- `NEUTRAL` - –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ
- `MIXED` - –°–º–µ—à–∞–Ω–Ω–æ–µ

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏–π

```python
async def intent_example():
    ml_integration = MLIntegration()
    
    intent_examples = [
        "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        "–í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É —Å –ª–æ–≥–∏–Ω–æ–º admin",
        "–ü—Ä–æ–≤–µ—Ä—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö",
        "–û–±–Ω–æ–≤–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã",
        "–û—á–∏—Å—Ç–∏ –∫—ç—à"
    ]
    
    for text in intent_examples:
        result = await ml_integration.recognize_intent(text)
        if result:
            print(f"'{text}' -> {result.intent.value} (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {result.confidence:.2f})")
```

### –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π

```python
async def entity_example():
    ml_integration = MLIntegration()
    
    entity_examples = [
        "–ú–æ–π email john@example.com –∏ —Ç–µ–ª–µ—Ñ–æ–Ω +7 999 123 45 67",
        "–ö–æ–º–ø–∞–Ω–∏—è –û–û–û '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –±—É–¥—É—â–µ–≥–æ' –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ú–æ—Å–∫–≤–µ",
        "–í—Å—Ç—Ä–µ—á–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –Ω–∞ 15.08.2024 –≤ 14:30"
    ]
    
    for text in entity_examples:
        result = await ml_integration.extract_entities(text)
        if result and result.entities:
            print(f"'{text}' -> {len(result.entities)} —Å—É—â–Ω–æ—Å—Ç–µ–π")
            for entity in result.entities:
                print(f"  {entity.entity_type.value}: '{entity.text}'")
```

### –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π

```python
async def sentiment_example():
    ml_integration = MLIntegration()
    
    sentiment_examples = [
        "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ",
        "–£–∂–∞—Å–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ, –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç",
        "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã"
    ]
    
    for text in sentiment_examples:
        result = await ml_integration.predict_sentiment(text)
        if result:
            print(f"'{text}' -> {result.sentiment.value} (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {result.confidence:.2f})")
```

### Model training / –ù–∞–≤—á–∞–Ω–Ω—è –º–æ–¥–µ–ª—ñ

```python
async def training_example():
    ml_integration = MLIntegration()
    
    # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    training_data = [
        TrainingExample(text="–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è", intent=IntentType.USER_REGISTRATION),
        TrainingExample(text="–°–æ–∑–¥–∞–π –∞–∫–∫–∞—É–Ω—Ç", intent=IntentType.USER_REGISTRATION),
        TrainingExample(text="–í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É", intent=IntentType.USER_LOGIN),
        TrainingExample(text="–ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è", intent=IntentType.USER_LOGIN),
        TrainingExample(text="–ü—Ä–æ–≤–µ—Ä—å –¥–∞–Ω–Ω—ã–µ", intent=IntentType.DATA_VALIDATION)
    ]
    
    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è
    config = TrainingConfig(
        model_type=MLModelType.BERT,
        training_data=training_data,
        epochs=10,
        learning_rate=2e-5,
        batch_size=16,
        save_path="models/intent_classifier/"
    )
    
    # –û–±—É—á–µ–Ω–∏–µ
    result = await ml_integration.train_model("intent_classifier", training_data, config)
    
    if result["success"]:
        print(f"–ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ {result['model_path']}")
        print(f"–ú–µ—Ç—Ä–∏–∫–∏: {result['training_metrics']}")
```

### –†–∞–±–æ—Ç–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

```python
async def metrics_example():
    ml_integration = MLIntegration()
    
    # –í—ã–ø–æ–ª–Ω—è–µ–º –∞–Ω–∞–ª–∏–∑ –¥–ª—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
    texts = ["–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è", "–í–æ–π–¥–∏ –≤ —Å–∏—Å—Ç–µ–º—É", "–ü—Ä–æ–≤–µ—Ä—å –¥–∞–Ω–Ω—ã–µ"]
    for text in texts:
        await ml_integration.analyze_text(text, "metrics_session")
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–≤–æ–¥–∫—É –º–µ—Ç—Ä–∏–∫
    metrics = await ml_integration.get_metrics_summary()
    
    if metrics["success"]:
        for metric_name, metric_data in metrics["metrics"].items():
            print(f"{metric_name}: {metric_data['current_value']:.3f}")
```

## Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

ML Integration –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook —Å–æ–±—ã—Ç–∏—è –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

### –°–æ–±—ã—Ç–∏—è ML

- `ml.intent.recognized` - –†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–∏–µ
- `ml.entity.extracted` - –ò–∑–≤–ª–µ—á–µ–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏
- `ml.context.updated` - –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç
- `ml.model.trained` - –û–±—É—á–µ–Ω–∞ –º–æ–¥–µ–ª—å
- `ml.prediction.made` - –í—ã–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä webhook —Å–æ–±—ã—Ç–∏—è

```json
{
  "event_type": "ml.intent.recognized",
  "timestamp": "2024-01-01T12:00:00Z",
  "data": {
    "intent": "user_registration",
    "confidence": 0.95,
    "text": "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –º–µ–Ω—è –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    "session_id": "user_123",
    "processing_time": 0.15
  },
  "source": "mova_sdk",
  "version": "2.2"
}
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–∫–ª—é—á–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `batch_analyze` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–µ–∫—Å—Ç–æ–≤
3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `await`
4. **–ú–æ–¥–µ–ª–∏**: –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
status = ml_integration.get_system_status()
print(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥–µ–ª–µ–π: {status['models_loaded']}")
print(f"–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π: {status['active_sessions']}")
print(f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Ç—Ä–∏–∫: {status['metrics_count']}")

# –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫
await ml_integration.export_metrics("metrics_export.json")
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

2. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Å–∏—Å—Ç–µ–º—ã

3. **–û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ –º–æ–¥–µ–ª—è–º
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è ML
logging.getLogger("mova.ml").setLevel(logging.DEBUG)
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
await ml_integration.add_custom_entity_pattern(
    "CUSTOM", 
    r"\bcustom\b", 
    "entity_extractor"
)
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫

```python
from mova.ml.metrics import BaseMetric

class CustomMetric(BaseMetric):
    async def update(self, value: float, metadata: Optional[Dict[str, Any]] = None) -> None:
        await self.add_point(value, metadata)

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –º–µ—Ç—Ä–∏–∫–∏
ml_integration.metrics.add_custom_metric("custom_metric", CustomMetric("custom_metric"))
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

ML Integration —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é MOVA SDK –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ —Ç–æ–π –∂–µ –ª–∏—Ü–µ–Ω–∑–∏–µ–π. 